{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '44825228-c925ad4267e8085ff76ea7430',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n});\n\nexport async function getImage(image, currentPage) {\n  const res = await axios.get('', {\n    params: {\n      q: image,\n      page: currentPage,\n    },\n  });\n  return res.data;\n}\n","\n\nfunction imageTemplate({comments, downloads, views, likes, largeImageURL, tags, webformatURL}) {\n      return `<li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\">\n      </a>\n      <div class=\"info\">\n      <div class=\"info-container\">\n        <p class=\"key\">Likes</p>\n        <p class=\"value\">${likes}</p>\n      <div class=\"info-container\">\n        <p class=\"key\">Views</p>\n        <p class=\"value\">${views\n}</p>\n      </div>\n      <div class=\"info-container\">\n        <p class=\"key\">Comments</p>\n        <p class=\"value\">${comments}</p>\n      </div>\n      <div class=\"info-container\">\n        <p class=\"key\">Downloads</p>\n        <p class=\"value\">${downloads}</p>\n      </div>\n      </div>\n    </li>`\n}\n\nexport function imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImage } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryIt = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst formEL = document.querySelector('.search-form');\nconst inputEl = document.querySelector('#search-input');\nconst loader = document.querySelector('.loader');\nexport const ulElem = document.querySelector('.gallery');\nconst moreBtnEl = document.querySelector('.more-img-btn');\n\nlet currentPage = 1;\nlet perPage = 15;\nlet maxPage = 0;\nlet userImg = '';\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction hideBtn() {\n  moreBtnEl.classList.add('hidden');\n}\n\nfunction showBtn() {\n  moreBtnEl.classList.remove('hidden');\n}\n\nformEL.addEventListener('submit', async e => {\n  currentPage = 1;\n  e.preventDefault();\n  userImg = inputEl.value.trim();\n  showLoader();\n  if (userImg === '') {\n    ulElem.innerHTML = '';\n    iziToast.error({\n      title: '',\n      message: 'Enter query to see rezults!',\n      position: 'topRight',\n    });\n    hideLoader();\n    return;\n  }\n  try {\n    const { hits, totalHits } = await getImage(userImg, currentPage);\n    maxPage = Math.ceil(totalHits / perPage);\n    console.log(maxPage);\n    if (hits.length === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        maxWidth: '432px',\n        color: '#ef4040',\n      });\n      ulElem.innerHTML = '';\n      updateBtnStatus();\n      hideLoader();\n      formEL.reset();\n      return;\n    }\n    const markup = imagesTemplate(hits);\n    ulElem.innerHTML = markup;\n    galleryIt.refresh();\n    hideLoader();\n    formEL.reset();\n  } catch {\n    err => {\n      console.log(err);\n    };\n  }\n  updateBtnStatus();\n});\n\nmoreBtnEl.addEventListener('click', async () => {\n  currentPage++;\n  hideBtn();\n  showLoader();\n  try {\n    const { hits } = await getImage(userImg, currentPage);\n    const markup = imagesTemplate(hits);\n    ulElem.insertAdjacentHTML('beforeend', markup);\n    galleryIt.refresh();\n    scrollGallery();\n    hideLoader();\n  } catch (err) {\n    console.log(err);\n  }\n  updateBtnStatus();\n});\n\nfunction updateBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideBtn();\n    if (maxPage) {\n      iziToast.info({\n        title: '',\n        message: 'We`re sorry, but you`ve reached the end of search results.',\n      });\n    }\n  } else {\n    showBtn();\n  }\n}\n\nfunction scrollGallery() {\n  const liElem = ulElem.children[0];\n  const height = liElem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","Axios","getImage","image","currentPage","imageTemplate","comments","downloads","views","likes","largeImageURL","tags","webformatURL","imagesTemplate","images","galleryIt","SimpleLightbox","formEL","inputEl","loader","ulElem","moreBtnEl","perPage","maxPage","userImg","showLoader","hideLoader","hideBtn","showBtn","e","iziToast","hits","totalHits","updateBtnStatus","markup","scrollGallery","err","height"],"mappings":"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"}